(()=>{(function(){"use strict";var v=function(){var e=this,s=e.$createElement,n=e._self._c||s;return e.tabs&&e.tabs.length>1?n("div",{staticClass:"k-tabs",attrs:{"data-theme":e.theme}},[n("nav",[e._l(e.visibleTabs,function(t){return n("k-button",{key:t.name,staticClass:"k-tab-button",attrs:{link:t.link,current:e.current===t.name,icon:t.icon,tooltip:t.label}},[e._v(" "+e._s(t.label||t.text||t.name)+" "),t.badge?n("span",{staticClass:"k-tabs-badge"},[e._v(" "+e._s(t.badge)+" ")]):e._e()])}),e.invisibleTabs.length?n("k-button",{staticClass:"k-tab-button k-tabs-dropdown-button",attrs:{text:e.$t("more"),icon:"dots"},on:{click:function(t){return t.stopPropagation(),e.$refs.more.toggle()}}}):e._e()],2),e.invisibleTabs.length?n("k-dropdown-content",{ref:"more",staticClass:"k-tabs-dropdown",attrs:{align:"right"}},e._l(e.invisibleTabs,function(t){return n("k-dropdown-item",{key:"more-"+t.name,attrs:{link:t.link,current:e.tab===t.name,icon:t.icon,tooltip:t.label}},[e._v(" "+e._s(t.label||t.text||t.name)+" ")])}),1):e._e()],1):e._e()},m=[],A="";function l(e,s,n,t,a,h,_,z){var i=typeof e=="function"?e.options:e;s&&(i.render=s,i.staticRenderFns=n,i._compiled=!0),t&&(i.functional=!0),h&&(i._scopeId="data-v-"+h);var o;if(_?(o=function(r){r=r||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!r&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(r=__VUE_SSR_CONTEXT__),a&&a.call(this,r),r&&r._registeredComponents&&r._registeredComponents.add(_)},i._ssrRegister=o):a&&(o=z?function(){a.call(this,(i.functional?this.parent:this).$root.$options.shadowRoot)}:a),o)if(i.functional){i._injectStyles=o;var R=i.render;i.render=function(F,b){return o.call(b),R(F,b)}}else{var u=i.beforeCreate;i.beforeCreate=u?[].concat(u,o):[o]}return{exports:e,options:i}}const g={props:{tab:String,tabs:Array,theme:String},data(){return{size:null,visibleTabs:this.tabs,invisibleTabs:[]}},computed:{current(){return(this.tabs.find(s=>s.name===this.tab)||this.tabs[0]||{}).name}},watch:{tabs(e){this.visibleTabs=e,this.invisibleTabs=[],this.resize(!0)}},created(){window.addEventListener("resize",this.resize)},destroyed(){window.removeEventListener("resize",this.resize)},methods:{resize(e){if(!(!this.tabs||this.tabs.length<=1)){if(this.tabs.length<=3){this.visibleTabs=this.tabs,this.invisibleTabs=[];return}if(window.innerWidth>=700){if(this.size==="large"&&!e)return;this.visibleTabs=this.tabs,this.invisibleTabs=[],this.size="large"}else{if(this.size==="small"&&!e)return;this.visibleTabs=this.tabs.slice(0,2),this.invisibleTabs=this.tabs.slice(2),this.size="small"}}}}},c={};var f=l(g,v,m,!1,p,null,null,null);function p(e){for(let s in c)this[s]=c[s]}var k=function(){return f.exports}(),T={namespaced:!0,components:{},mutations:{IGNORECHANGES(e,s){console.log("Hello from inside injected module mutation code !",e,this,s),e&&e.models[e.current]&&e.models[e.current].changes[s]?(console.log("Erasing changes !",e.models[e.current]),e.models[e.current].originals[s]=e.models[e.current].changes[s],window.panel.$vue.$delete(e.models[e.current].changes,s)):console.log("NO STATE !",e)}},actions:{ignorechanges({commit:e},s){console.log("Hello from inside injected module actions code ! = ",s),e("IGNORECHANGES",s)}}},$=function(){var e=this,s=e.$createElement,n=e._self._c||s;return e.tabs&&e.tabs.length>1?n("div",{staticClass:"k-tabs k-tabs-field",attrs:{"data-theme":e.theme}},[n("nav",[e._l(e.visibleTabs,function(t){return n("k-button",{key:t.name,staticClass:"k-tab-button",attrs:{link:t.link,current:e.current===t.name,icon:t.icon,tooltip:t.label},on:{click:function(a){return a.stopPropagation(),e.btnClick(t.name,a)}}},[e._v(" "+e._s(t.label||t.text||t.name)+" "),t.badge?n("span",{staticClass:"k-tabs-badge"},[e._v(" "+e._s(t.badge)+" ")]):e._e()])}),e.invisibleTabs.length?n("k-button",{staticClass:"k-tab-button k-tabs-dropdown-button",attrs:{text:e.$t("more"),icon:"dots"},on:{click:function(t){return t.stopPropagation(),e.$refs.more.toggle()}}}):e._e()],2),e.invisibleTabs.length?n("k-dropdown-content",{ref:"more",staticClass:"k-tabs-dropdown",attrs:{align:"right"}},e._l(e.invisibleTabs,function(t){return n("k-dropdown-item",{key:"more-"+t.name,attrs:{link:t.link,current:e.tab===t.name,icon:t.icon,tooltip:t.label}},[e._v(" "+e._s(t.label||t.text||t.name)+" ")])}),1):e._e()],1):e._e()},C=[],G="";const w={inheritAttrs:!1,mixins:[k],data(){return{currentTab:""}},props:{value:String},beforeCreate:function(){window.panel.$vue.$delete(this.$options.props,"tab")},created:function(){this.currentTab=this.getTabFromLocalStorage(),window.panel.app.$store._mutations["content/IGNORECHANGES"]||this.$store.registerModule("content",T,{preserveState:!0}),this.$emit("input",this.tab),this.cancelChanges()},watch:{value(){this.writeTabToLocalStorage(this.value),this.cancelChanges()}},computed:{tab(){return this.currentTab}},methods:{cancelChanges(){this.$store.dispatch("content/ignorechanges",this.$attrs.name)},getTabFromLocalStorage(){try{return window.localStorage.getItem(`tabsfield-${this.$attrs.name}`)}catch{}return null},writeTabToLocalStorage(e){if(!this.$attrs.name||this.$attrs.name=="")return!1;try{return window.localStorage.setItem(`tabsfield-${this.$attrs.name}`,e),!0}catch{}return!1},btnClick(e,s){this.currentTab=e,this.$emit("input",e)}}},d={};var S=l(w,$,C,!1,y,null,null,null);function y(e){for(let s in d)this[s]=d[s]}var E=function(){return S.exports}();panel.plugin("daandelange/tabsfield",{components:{},fields:{tabs:E}})})();})();
