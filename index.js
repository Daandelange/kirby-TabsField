(function(){"use strict";const e=window.Vue;function i(){return window.panel}e.computed,e.customRef,e.defineAsyncComponent,e.defineComponent,e.effectScope,e.getCurrentInstance,e.getCurrentScope,e.h,e.inject,e.isProxy,e.isReactive,e.isReadonly,e.isRef,e.isShallow,e.markRaw,e.nextTick,e.onActivated,e.onBeforeMount,e.onBeforeUnmount,e.onBeforeUpdate,e.onDeactivated,e.onErrorCaptured,e.onMounted,e.onRenderTracked,e.onRenderTriggered,e.onScopeDispose,e.onServerPrefetch,e.onUnmounted,e.onUpdated,e.provide,e.proxyRefs,e.reactive,e.readonly,e.ref,e.shallowReactive,e.shallowReadonly,e.shallowRef,e.toRaw,e.toRef,e.toRefs,e.triggerRef,e.unref,e.useAttrs,e.useCssModule,e.useCssVars,e.useListeners,e.useSlots,e.watch,e.watchEffect,e.watchPostEffect,e.watchSyncEffect;function o(t,n,a,s,d,f,h,m){var c=typeof t=="function"?t.options:t;return{exports:t,options:c}}var r=o({name:"k-tabs-field",extends:"k-tabs",inheritAttrs:!1,props:{value:String,tab:String},created:function(){this.$emit("input",this.getSavedTab())},mounted(){var t,n;(t=this.$el)==null||t.classList.add("k-field"),(n=this.$el)==null||n.classList.add("k-tabs-field")},watch:{value(){if(this.value==null||!this.tabs.find(t=>t.name===this.value)){let t=this.getSavedTab();t&&this.$emit("input",t);return}this.writeTabToLocalStorage(this.value),this.cancelChanges()}},computed:{current(){const t=this.tabs.find(n=>n.name===this.value)??this.tabs[0];return t==null?void 0:t.name},saveable(){return!1},buttons(){let t=this.visible.map(this.button),n=this;return t.map(function(a){return a.click=function(s){n.btnClick(a.name,s)},a})}},methods:{getSavedTab(){let t=this.getTabFromLocalStorage()??this.value;return((t?this.tabs.find(n=>n.name===t):null)??this.tabs[0]).name},cancelChanges(){if(!this.$attrs.name||this.$attrs.name=="")return;const t=i();t.view.props.originals?t.view.props.originals[[this.$attrs.name]]=t.view.props.content[this.$attrs.name]:t.content.version("latest")[this.$attrs.name]=t.content.version("changes")[this.$attrs.name]},getTabFromLocalStorage(){try{return window.localStorage.getItem(`tabsfield-${this.$attrs.name}`)}catch{}return null},writeTabToLocalStorage(t){if(!this.$attrs.name||this.$attrs.name==""||t==null||t==null)return!1;try{return window.localStorage.setItem(`tabsfield-${this.$attrs.name}`,t),!0}catch{}return!1},btnClick(t,n){this.$emit("input",t)}}});const l=r.exports;panel.plugin("daandelange/tabsfield",{components:{},fields:{tabs:l}})})();
